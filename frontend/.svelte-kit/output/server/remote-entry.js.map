{"version":3,"file":"remote-entry.js","sources":["../../../node_modules/@sveltejs/kit/src/runtime/app/server/remote/shared.js","../../../node_modules/@sveltejs/kit/src/runtime/app/server/remote/command.js","../../../node_modules/@sveltejs/kit/src/runtime/form-utils.js","../../../node_modules/@sveltejs/kit/src/runtime/app/server/remote/form.js","../../../node_modules/@sveltejs/kit/src/runtime/app/server/remote/prerender.js","../../../node_modules/@sveltejs/kit/src/runtime/app/server/remote/query.js"],"sourcesContent":["/** @import { RequestEvent } from '@sveltejs/kit' */\n/** @import { ServerHooks, MaybePromise, RequestState, RemoteInfo, RequestStore } from 'types' */\nimport { parse } from 'devalue';\nimport { error } from '@sveltejs/kit';\nimport { with_request_store, get_request_store } from '@sveltejs/kit/internal/server';\nimport { stringify_remote_arg } from '../../../shared.js';\n\n/**\n * @param {any} validate_or_fn\n * @param {(arg?: any) => any} [maybe_fn]\n * @returns {(arg?: any) => MaybePromise<any>}\n */\nexport function create_validator(validate_or_fn, maybe_fn) {\n\t// prevent functions without validators being called with arguments\n\tif (!maybe_fn) {\n\t\treturn (arg) => {\n\t\t\tif (arg !== undefined) {\n\t\t\t\terror(400, 'Bad Request');\n\t\t\t}\n\t\t};\n\t}\n\n\t// if 'unchecked', pass input through without validating\n\tif (validate_or_fn === 'unchecked') {\n\t\treturn (arg) => arg;\n\t}\n\n\t// use https://standardschema.dev validator if provided\n\tif ('~standard' in validate_or_fn) {\n\t\treturn async (arg) => {\n\t\t\t// Get event before async validation to ensure it's available in server environments without AsyncLocalStorage, too\n\t\t\tconst { event, state } = get_request_store();\n\t\t\tconst validate = validate_or_fn['~standard'].validate;\n\n\t\t\tconst result = await validate(arg);\n\n\t\t\t// if the `issues` field exists, the validation failed\n\t\t\tif (result.issues) {\n\t\t\t\terror(\n\t\t\t\t\t400,\n\t\t\t\t\tawait state.handleValidationError({\n\t\t\t\t\t\tissues: result.issues,\n\t\t\t\t\t\tevent\n\t\t\t\t\t})\n\t\t\t\t);\n\t\t\t}\n\n\t\t\treturn result.value;\n\t\t};\n\t}\n\n\tthrow new Error(\n\t\t'Invalid validator passed to remote function. Expected \"unchecked\" or a Standard Schema (https://standardschema.dev)'\n\t);\n}\n\n/**\n * In case of a single remote function call, just returns the result.\n *\n * In case of a full page reload, returns the response for a remote function call,\n * either from the cache or by invoking the function.\n * Also saves an uneval'ed version of the result for later HTML inlining for hydration.\n *\n * @template {MaybePromise<any>} T\n * @param {RemoteInfo} info\n * @param {any} arg\n * @param {RequestState} state\n * @param {() => Promise<T>} get_result\n * @returns {Promise<T>}\n */\nexport async function get_response(info, arg, state, get_result) {\n\t// wait a beat, in case `myQuery().set(...)` is immediately called\n\t// eslint-disable-next-line @typescript-eslint/await-thenable\n\tawait 0;\n\n\tconst cache = get_cache(info, state);\n\n\treturn (cache[stringify_remote_arg(arg, state.transport)] ??= get_result());\n}\n\n/**\n * @param {any} data\n * @param {ServerHooks['transport']} transport\n */\nexport function parse_remote_response(data, transport) {\n\t/** @type {Record<string, any>} */\n\tconst revivers = {};\n\tfor (const key in transport) {\n\t\trevivers[key] = transport[key].decode;\n\t}\n\n\treturn parse(data, revivers);\n}\n\n/**\n * Like `with_event` but removes things from `event` you cannot see/call in remote functions, such as `setHeaders`.\n * @template T\n * @param {RequestEvent} event\n * @param {RequestState} state\n * @param {boolean} allow_cookies\n * @param {any} arg\n * @param {(arg: any) => any} validate\n * @param {(arg?: any) => T} fn\n */\nexport async function run_remote_function(event, state, allow_cookies, arg, validate, fn) {\n\t/** @type {RequestStore} */\n\tconst store = {\n\t\tevent: {\n\t\t\t...event,\n\t\t\tsetHeaders: () => {\n\t\t\t\tthrow new Error('setHeaders is not allowed in remote functions');\n\t\t\t},\n\t\t\tcookies: {\n\t\t\t\t...event.cookies,\n\t\t\t\tset: (name, value, opts) => {\n\t\t\t\t\tif (!allow_cookies) {\n\t\t\t\t\t\tthrow new Error('Cannot set cookies in `query` or `prerender` functions');\n\t\t\t\t\t}\n\n\t\t\t\t\tif (opts.path && !opts.path.startsWith('/')) {\n\t\t\t\t\t\tthrow new Error('Cookies set in remote functions must have an absolute path');\n\t\t\t\t\t}\n\n\t\t\t\t\treturn event.cookies.set(name, value, opts);\n\t\t\t\t},\n\t\t\t\tdelete: (name, opts) => {\n\t\t\t\t\tif (!allow_cookies) {\n\t\t\t\t\t\tthrow new Error('Cannot delete cookies in `query` or `prerender` functions');\n\t\t\t\t\t}\n\n\t\t\t\t\tif (opts.path && !opts.path.startsWith('/')) {\n\t\t\t\t\t\tthrow new Error('Cookies deleted in remote functions must have an absolute path');\n\t\t\t\t\t}\n\n\t\t\t\t\treturn event.cookies.delete(name, opts);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tstate: {\n\t\t\t...state,\n\t\t\tis_in_remote_function: true\n\t\t}\n\t};\n\n\t// In two parts, each with_event, so that runtimes without async local storage can still get the event at the start of the function\n\tconst validated = await with_request_store(store, () => validate(arg));\n\treturn with_request_store(store, () => fn(validated));\n}\n\n/**\n * @param {RemoteInfo} info\n * @param {RequestState} state\n */\nexport function get_cache(info, state = get_request_store().state) {\n\tlet cache = state.remote_data?.get(info);\n\n\tif (cache === undefined) {\n\t\tcache = {};\n\t\t(state.remote_data ??= new Map()).set(info, cache);\n\t}\n\n\treturn cache;\n}\n","/** @import { RemoteCommand } from '@sveltejs/kit' */\n/** @import { RemoteInfo, MaybePromise } from 'types' */\n/** @import { StandardSchemaV1 } from '@standard-schema/spec' */\nimport { get_request_store } from '@sveltejs/kit/internal/server';\nimport { create_validator, run_remote_function } from './shared.js';\n\n/**\n * Creates a remote command. When called from the browser, the function will be invoked on the server via a `fetch` call.\n *\n * See [Remote functions](https://svelte.dev/docs/kit/remote-functions#command) for full documentation.\n *\n * @template Output\n * @overload\n * @param {() => Output} fn\n * @returns {RemoteCommand<void, Output>}\n * @since 2.27\n */\n/**\n * Creates a remote command. When called from the browser, the function will be invoked on the server via a `fetch` call.\n *\n * See [Remote functions](https://svelte.dev/docs/kit/remote-functions#command) for full documentation.\n *\n * @template Input\n * @template Output\n * @overload\n * @param {'unchecked'} validate\n * @param {(arg: Input) => Output} fn\n * @returns {RemoteCommand<Input, Output>}\n * @since 2.27\n */\n/**\n * Creates a remote command. When called from the browser, the function will be invoked on the server via a `fetch` call.\n *\n * See [Remote functions](https://svelte.dev/docs/kit/remote-functions#command) for full documentation.\n *\n * @template {StandardSchemaV1} Schema\n * @template Output\n * @overload\n * @param {Schema} validate\n * @param {(arg: StandardSchemaV1.InferOutput<Schema>) => Output} fn\n * @returns {RemoteCommand<StandardSchemaV1.InferInput<Schema>, Output>}\n * @since 2.27\n */\n/**\n * @template Input\n * @template Output\n * @param {any} validate_or_fn\n * @param {(arg?: Input) => Output} [maybe_fn]\n * @returns {RemoteCommand<Input, Output>}\n * @since 2.27\n */\n/*@__NO_SIDE_EFFECTS__*/\nexport function command(validate_or_fn, maybe_fn) {\n\t/** @type {(arg?: Input) => Output} */\n\tconst fn = maybe_fn ?? validate_or_fn;\n\n\t/** @type {(arg?: any) => MaybePromise<Input>} */\n\tconst validate = create_validator(validate_or_fn, maybe_fn);\n\n\t/** @type {RemoteInfo} */\n\tconst __ = { type: 'command', id: '', name: '' };\n\n\t/** @type {RemoteCommand<Input, Output> & { __: RemoteInfo }} */\n\tconst wrapper = (arg) => {\n\t\tconst { event, state } = get_request_store();\n\n\t\tif (state.is_endpoint_request) {\n\t\t\tif (!['POST', 'PUT', 'PATCH', 'DELETE'].includes(event.request.method)) {\n\t\t\t\tthrow new Error(\n\t\t\t\t\t`Cannot call a command (\\`${__.name}(${maybe_fn ? '...' : ''})\\`) from a ${event.request.method} handler`\n\t\t\t\t);\n\t\t\t}\n\t\t} else if (!event.isRemoteRequest) {\n\t\t\tthrow new Error(\n\t\t\t\t`Cannot call a command (\\`${__.name}(${maybe_fn ? '...' : ''})\\`) during server-side rendering`\n\t\t\t);\n\t\t}\n\n\t\tstate.refreshes ??= {};\n\n\t\tconst promise = Promise.resolve(run_remote_function(event, state, true, arg, validate, fn));\n\n\t\t// @ts-expect-error\n\t\tpromise.updates = () => {\n\t\t\tthrow new Error(`Cannot call '${__.name}(...).updates(...)' on the server`);\n\t\t};\n\n\t\treturn /** @type {ReturnType<RemoteCommand<Input, Output>>} */ (promise);\n\t};\n\n\tObject.defineProperty(wrapper, '__', { value: __ });\n\n\t// On the server, pending is always 0\n\tObject.defineProperty(wrapper, 'pending', {\n\t\tget: () => 0\n\t});\n\n\treturn wrapper;\n}\n","/** @import { RemoteForm } from '@sveltejs/kit' */\n/** @import { InternalRemoteFormIssue } from 'types' */\n/** @import { StandardSchemaV1 } from '@standard-schema/spec' */\n\nimport { DEV } from 'esm-env';\n\n/**\n * Sets a value in a nested object using a path string, mutating the original object\n * @param {Record<string, any>} object\n * @param {string} path_string\n * @param {any} value\n */\nexport function set_nested_value(object, path_string, value) {\n\tif (path_string.startsWith('n:')) {\n\t\tpath_string = path_string.slice(2);\n\t\tvalue = value === '' ? undefined : parseFloat(value);\n\t} else if (path_string.startsWith('b:')) {\n\t\tpath_string = path_string.slice(2);\n\t\tvalue = value === 'on';\n\t}\n\n\tdeep_set(object, split_path(path_string), value);\n}\n\n/**\n * Convert `FormData` into a POJO\n * @param {FormData} data\n */\nexport function convert_formdata(data) {\n\t/** @type {Record<string, any>} */\n\tconst result = {};\n\n\tfor (let key of data.keys()) {\n\t\tif (key.startsWith('sveltekit:')) {\n\t\t\tcontinue;\n\t\t}\n\n\t\tconst is_array = key.endsWith('[]');\n\t\t/** @type {any[]} */\n\t\tlet values = data.getAll(key);\n\n\t\tif (is_array) key = key.slice(0, -2);\n\n\t\tif (values.length > 1 && !is_array) {\n\t\t\tthrow new Error(`Form cannot contain duplicated keys — \"${key}\" has ${values.length} values`);\n\t\t}\n\n\t\t// an empty `<input type=\"file\">` will submit a non-existent file, bizarrely\n\t\tvalues = values.filter(\n\t\t\t(entry) => typeof entry === 'string' || entry.name !== '' || entry.size > 0\n\t\t);\n\n\t\tif (key.startsWith('n:')) {\n\t\t\tkey = key.slice(2);\n\t\t\tvalues = values.map((v) => (v === '' ? undefined : parseFloat(/** @type {string} */ (v))));\n\t\t} else if (key.startsWith('b:')) {\n\t\t\tkey = key.slice(2);\n\t\t\tvalues = values.map((v) => v === 'on');\n\t\t}\n\n\t\tset_nested_value(result, key, is_array ? values : values[0]);\n\t}\n\n\treturn result;\n}\n\nconst path_regex = /^[a-zA-Z_$]\\w*(\\.[a-zA-Z_$]\\w*|\\[\\d+\\])*$/;\n\n/**\n * @param {string} path\n */\nexport function split_path(path) {\n\tif (!path_regex.test(path)) {\n\t\tthrow new Error(`Invalid path ${path}`);\n\t}\n\n\treturn path.split(/\\.|\\[|\\]/).filter(Boolean);\n}\n\n/**\n * Check if a property key is dangerous and could lead to prototype pollution\n * @param {string} key\n */\nfunction check_prototype_pollution(key) {\n\tif (key === '__proto__' || key === 'constructor' || key === 'prototype') {\n\t\tthrow new Error(\n\t\t\t`Invalid key \"${key}\"` +\n\t\t\t\t(DEV ? ': This key is not allowed to prevent prototype pollution.' : '')\n\t\t);\n\t}\n}\n\n/**\n * Sets a value in a nested object using an array of keys, mutating the original object.\n * @param {Record<string, any>} object\n * @param {string[]} keys\n * @param {any} value\n */\nexport function deep_set(object, keys, value) {\n\tlet current = object;\n\n\tfor (let i = 0; i < keys.length - 1; i += 1) {\n\t\tconst key = keys[i];\n\n\t\tcheck_prototype_pollution(key);\n\n\t\tconst is_array = /^\\d+$/.test(keys[i + 1]);\n\t\tconst exists = key in current;\n\t\tconst inner = current[key];\n\n\t\tif (exists && is_array !== Array.isArray(inner)) {\n\t\t\tthrow new Error(`Invalid array key ${keys[i + 1]}`);\n\t\t}\n\n\t\tif (!exists) {\n\t\t\tcurrent[key] = is_array ? [] : {};\n\t\t}\n\n\t\tcurrent = current[key];\n\t}\n\n\tconst final_key = keys[keys.length - 1];\n\tcheck_prototype_pollution(final_key);\n\tcurrent[final_key] = value;\n}\n\n/**\n * @param {StandardSchemaV1.Issue} issue\n * @param {boolean} server Whether this issue came from server validation\n */\nexport function normalize_issue(issue, server = false) {\n\t/** @type {InternalRemoteFormIssue} */\n\tconst normalized = { name: '', path: [], message: issue.message, server };\n\n\tif (issue.path !== undefined) {\n\t\tlet name = '';\n\n\t\tfor (const segment of issue.path) {\n\t\t\tconst key = /** @type {string | number} */ (\n\t\t\t\ttypeof segment === 'object' ? segment.key : segment\n\t\t\t);\n\n\t\t\tnormalized.path.push(key);\n\n\t\t\tif (typeof key === 'number') {\n\t\t\t\tname += `[${key}]`;\n\t\t\t} else if (typeof key === 'string') {\n\t\t\t\tname += name === '' ? key : '.' + key;\n\t\t\t}\n\t\t}\n\n\t\tnormalized.name = name;\n\t}\n\n\treturn normalized;\n}\n\n/**\n * @param {InternalRemoteFormIssue[]} issues\n */\nexport function flatten_issues(issues) {\n\t/** @type {Record<string, InternalRemoteFormIssue[]>} */\n\tconst result = {};\n\n\tfor (const issue of issues) {\n\t\t(result.$ ??= []).push(issue);\n\n\t\tlet name = '';\n\n\t\tif (issue.path !== undefined) {\n\t\t\tfor (const key of issue.path) {\n\t\t\t\tif (typeof key === 'number') {\n\t\t\t\t\tname += `[${key}]`;\n\t\t\t\t} else if (typeof key === 'string') {\n\t\t\t\t\tname += name === '' ? key : '.' + key;\n\t\t\t\t}\n\n\t\t\t\t(result[name] ??= []).push(issue);\n\t\t\t}\n\t\t}\n\t}\n\n\treturn result;\n}\n\n/**\n * Gets a nested value from an object using a path array\n * @param {Record<string, any>} object\n * @param {(string | number)[]} path\n * @returns {any}\n */\n\nexport function deep_get(object, path) {\n\tlet current = object;\n\tfor (const key of path) {\n\t\tif (current == null || typeof current !== 'object') {\n\t\t\treturn current;\n\t\t}\n\t\tcurrent = current[key];\n\t}\n\treturn current;\n}\n\n/**\n * Creates a proxy-based field accessor for form data\n * @param {any} target - Function or empty POJO\n * @param {() => Record<string, any>} get_input - Function to get current input data\n * @param {(path: (string | number)[], value: any) => void} set_input - Function to set input data\n * @param {() => Record<string, InternalRemoteFormIssue[]>} get_issues - Function to get current issues\n * @param {(string | number)[]} path - Current access path\n * @returns {any} Proxy object with name(), value(), and issues() methods\n */\nexport function create_field_proxy(target, get_input, set_input, get_issues, path = []) {\n\tconst get_value = () => {\n\t\treturn deep_get(get_input(), path);\n\t};\n\n\treturn new Proxy(target, {\n\t\tget(target, prop) {\n\t\t\tif (typeof prop === 'symbol') return target[prop];\n\n\t\t\t// Handle array access like jobs[0]\n\t\t\tif (/^\\d+$/.test(prop)) {\n\t\t\t\treturn create_field_proxy({}, get_input, set_input, get_issues, [\n\t\t\t\t\t...path,\n\t\t\t\t\tparseInt(prop, 10)\n\t\t\t\t]);\n\t\t\t}\n\n\t\t\tconst key = build_path_string(path);\n\n\t\t\tif (prop === 'set') {\n\t\t\t\tconst set_func = function (/** @type {any} */ newValue) {\n\t\t\t\t\tset_input(path, newValue);\n\t\t\t\t\treturn newValue;\n\t\t\t\t};\n\t\t\t\treturn create_field_proxy(set_func, get_input, set_input, get_issues, [...path, prop]);\n\t\t\t}\n\n\t\t\tif (prop === 'value') {\n\t\t\t\treturn create_field_proxy(get_value, get_input, set_input, get_issues, [...path, prop]);\n\t\t\t}\n\n\t\t\tif (prop === 'issues' || prop === 'allIssues') {\n\t\t\t\tconst issues_func = () => {\n\t\t\t\t\tconst all_issues = get_issues()[key === '' ? '$' : key];\n\n\t\t\t\t\tif (prop === 'allIssues') {\n\t\t\t\t\t\treturn all_issues?.map((issue) => ({\n\t\t\t\t\t\t\tpath: issue.path,\n\t\t\t\t\t\t\tmessage: issue.message\n\t\t\t\t\t\t}));\n\t\t\t\t\t}\n\n\t\t\t\t\treturn all_issues\n\t\t\t\t\t\t?.filter((issue) => issue.name === key)\n\t\t\t\t\t\t?.map((issue) => ({\n\t\t\t\t\t\t\tmessage: issue.message\n\t\t\t\t\t\t}));\n\t\t\t\t};\n\n\t\t\t\treturn create_field_proxy(issues_func, get_input, set_input, get_issues, [...path, prop]);\n\t\t\t}\n\n\t\t\tif (prop === 'as') {\n\t\t\t\t/**\n\t\t\t\t * @param {string} type\n\t\t\t\t * @param {string} [input_value]\n\t\t\t\t */\n\t\t\t\tconst as_func = (type, input_value) => {\n\t\t\t\t\tconst is_array =\n\t\t\t\t\t\ttype === 'file multiple' ||\n\t\t\t\t\t\ttype === 'select multiple' ||\n\t\t\t\t\t\t(type === 'checkbox' && typeof input_value === 'string');\n\n\t\t\t\t\tconst prefix =\n\t\t\t\t\t\ttype === 'number' || type === 'range'\n\t\t\t\t\t\t\t? 'n:'\n\t\t\t\t\t\t\t: type === 'checkbox' && !is_array\n\t\t\t\t\t\t\t\t? 'b:'\n\t\t\t\t\t\t\t\t: '';\n\n\t\t\t\t\t// Base properties for all input types\n\t\t\t\t\t/** @type {Record<string, any>} */\n\t\t\t\t\tconst base_props = {\n\t\t\t\t\t\tname: prefix + key + (is_array ? '[]' : ''),\n\t\t\t\t\t\tget 'aria-invalid'() {\n\t\t\t\t\t\t\tconst issues = get_issues();\n\t\t\t\t\t\t\treturn key in issues ? 'true' : undefined;\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\n\t\t\t\t\t// Add type attribute only for non-text inputs and non-select elements\n\t\t\t\t\tif (type !== 'text' && type !== 'select' && type !== 'select multiple') {\n\t\t\t\t\t\tbase_props.type = type === 'file multiple' ? 'file' : type;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Handle submit and hidden inputs\n\t\t\t\t\tif (type === 'submit' || type === 'hidden') {\n\t\t\t\t\t\tif (DEV) {\n\t\t\t\t\t\t\tif (!input_value) {\n\t\t\t\t\t\t\t\tthrow new Error(`\\`${type}\\` inputs must have a value`);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn Object.defineProperties(base_props, {\n\t\t\t\t\t\t\tvalue: { value: input_value, enumerable: true }\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\n\t\t\t\t\t// Handle select inputs\n\t\t\t\t\tif (type === 'select' || type === 'select multiple') {\n\t\t\t\t\t\treturn Object.defineProperties(base_props, {\n\t\t\t\t\t\t\tmultiple: { value: is_array, enumerable: true },\n\t\t\t\t\t\t\tvalue: {\n\t\t\t\t\t\t\t\tenumerable: true,\n\t\t\t\t\t\t\t\tget() {\n\t\t\t\t\t\t\t\t\treturn get_value();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\n\t\t\t\t\t// Handle checkbox inputs\n\t\t\t\t\tif (type === 'checkbox' || type === 'radio') {\n\t\t\t\t\t\tif (DEV) {\n\t\t\t\t\t\t\tif (type === 'radio' && !input_value) {\n\t\t\t\t\t\t\t\tthrow new Error('Radio inputs must have a value');\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (type === 'checkbox' && is_array && !input_value) {\n\t\t\t\t\t\t\t\tthrow new Error('Checkbox array inputs must have a value');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn Object.defineProperties(base_props, {\n\t\t\t\t\t\t\tvalue: { value: input_value ?? 'on', enumerable: true },\n\t\t\t\t\t\t\tchecked: {\n\t\t\t\t\t\t\t\tenumerable: true,\n\t\t\t\t\t\t\t\tget() {\n\t\t\t\t\t\t\t\t\tconst value = get_value();\n\n\t\t\t\t\t\t\t\t\tif (type === 'radio') {\n\t\t\t\t\t\t\t\t\t\treturn value === input_value;\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\tif (is_array) {\n\t\t\t\t\t\t\t\t\t\treturn (value ?? []).includes(input_value);\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\treturn value;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\n\t\t\t\t\t// Handle file inputs\n\t\t\t\t\tif (type === 'file' || type === 'file multiple') {\n\t\t\t\t\t\treturn Object.defineProperties(base_props, {\n\t\t\t\t\t\t\tmultiple: { value: is_array, enumerable: true },\n\t\t\t\t\t\t\tfiles: {\n\t\t\t\t\t\t\t\tenumerable: true,\n\t\t\t\t\t\t\t\tget() {\n\t\t\t\t\t\t\t\t\tconst value = get_value();\n\n\t\t\t\t\t\t\t\t\t// Convert File/File[] to FileList-like object\n\t\t\t\t\t\t\t\t\tif (value instanceof File) {\n\t\t\t\t\t\t\t\t\t\t// In browsers, we can create a proper FileList using DataTransfer\n\t\t\t\t\t\t\t\t\t\tif (typeof DataTransfer !== 'undefined') {\n\t\t\t\t\t\t\t\t\t\t\tconst fileList = new DataTransfer();\n\t\t\t\t\t\t\t\t\t\t\tfileList.items.add(value);\n\t\t\t\t\t\t\t\t\t\t\treturn fileList.files;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t// Fallback for environments without DataTransfer\n\t\t\t\t\t\t\t\t\t\treturn { 0: value, length: 1 };\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\tif (Array.isArray(value) && value.every((f) => f instanceof File)) {\n\t\t\t\t\t\t\t\t\t\tif (typeof DataTransfer !== 'undefined') {\n\t\t\t\t\t\t\t\t\t\t\tconst fileList = new DataTransfer();\n\t\t\t\t\t\t\t\t\t\t\tvalue.forEach((file) => fileList.items.add(file));\n\t\t\t\t\t\t\t\t\t\t\treturn fileList.files;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t// Fallback for environments without DataTransfer\n\t\t\t\t\t\t\t\t\t\t/** @type {any} */\n\t\t\t\t\t\t\t\t\t\tconst fileListLike = { length: value.length };\n\t\t\t\t\t\t\t\t\t\tvalue.forEach((file, index) => {\n\t\t\t\t\t\t\t\t\t\t\tfileListLike[index] = file;\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\treturn fileListLike;\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\treturn null;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\n\t\t\t\t\t// Handle all other input types (text, number, etc.)\n\t\t\t\t\treturn Object.defineProperties(base_props, {\n\t\t\t\t\t\tvalue: {\n\t\t\t\t\t\t\tenumerable: true,\n\t\t\t\t\t\t\tget() {\n\t\t\t\t\t\t\t\tconst value = get_value();\n\t\t\t\t\t\t\t\treturn value != null ? String(value) : '';\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t};\n\n\t\t\t\treturn create_field_proxy(as_func, get_input, set_input, get_issues, [...path, 'as']);\n\t\t\t}\n\n\t\t\t// Handle property access (nested fields)\n\t\t\treturn create_field_proxy({}, get_input, set_input, get_issues, [...path, prop]);\n\t\t}\n\t});\n}\n\n/**\n * Builds a path string from an array of path segments\n * @param {(string | number)[]} path\n * @returns {string}\n */\nexport function build_path_string(path) {\n\tlet result = '';\n\n\tfor (const segment of path) {\n\t\tif (typeof segment === 'number') {\n\t\t\tresult += `[${segment}]`;\n\t\t} else {\n\t\t\tresult += result === '' ? segment : '.' + segment;\n\t\t}\n\t}\n\n\treturn result;\n}\n\n/**\n * @param {RemoteForm<any, any>} instance\n * @deprecated remove in 3.0\n */\nexport function throw_on_old_property_access(instance) {\n\tObject.defineProperty(instance, 'field', {\n\t\tvalue: (/** @type {string} */ name) => {\n\t\t\tconst new_name = name.endsWith('[]') ? name.slice(0, -2) : name;\n\t\t\tthrow new Error(\n\t\t\t\t`\\`form.field\\` has been removed: Instead of \\`<input name={form.field('${name}')} />\\` do \\`<input {...form.fields.${new_name}.as(type)} />\\``\n\t\t\t);\n\t\t}\n\t});\n\n\tfor (const property of ['input', 'issues']) {\n\t\tObject.defineProperty(instance, property, {\n\t\t\tget() {\n\t\t\t\tconst new_name = property === 'issues' ? 'issues' : 'value';\n\t\t\t\treturn new Proxy(\n\t\t\t\t\t{},\n\t\t\t\t\t{\n\t\t\t\t\t\tget(_, prop) {\n\t\t\t\t\t\t\tconst prop_string = typeof prop === 'string' ? prop : String(prop);\n\t\t\t\t\t\t\tconst old =\n\t\t\t\t\t\t\t\tprop_string.includes('[') || prop_string.includes('.')\n\t\t\t\t\t\t\t\t\t? `['${prop_string}']`\n\t\t\t\t\t\t\t\t\t: `.${prop_string}`;\n\t\t\t\t\t\t\tconst replacement = `.${prop_string}.${new_name}()`;\n\t\t\t\t\t\t\tthrow new Error(\n\t\t\t\t\t\t\t\t`\\`form.${property}\\` has been removed: Instead of \\`form.${property}${old}\\` write \\`form.fields${replacement}\\``\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t}\n\t\t});\n\t}\n}\n","/** @import { RemoteFormInput, RemoteForm } from '@sveltejs/kit' */\n/** @import { InternalRemoteFormIssue, MaybePromise, RemoteInfo } from 'types' */\n/** @import { StandardSchemaV1 } from '@standard-schema/spec' */\nimport { get_request_store } from '@sveltejs/kit/internal/server';\nimport { DEV } from 'esm-env';\nimport {\n\tconvert_formdata,\n\tcreate_field_proxy,\n\tset_nested_value,\n\tthrow_on_old_property_access,\n\tdeep_set,\n\tnormalize_issue,\n\tflatten_issues\n} from '../../../form-utils.js';\nimport { get_cache, run_remote_function } from './shared.js';\n\n/**\n * Creates a form object that can be spread onto a `<form>` element.\n *\n * See [Remote functions](https://svelte.dev/docs/kit/remote-functions#form) for full documentation.\n *\n * @template Output\n * @overload\n * @param {(invalid: import('@sveltejs/kit').Invalid<void>) => MaybePromise<Output>} fn\n * @returns {RemoteForm<void, Output>}\n * @since 2.27\n */\n/**\n * Creates a form object that can be spread onto a `<form>` element.\n *\n * See [Remote functions](https://svelte.dev/docs/kit/remote-functions#form) for full documentation.\n *\n * @template {RemoteFormInput} Input\n * @template Output\n * @overload\n * @param {'unchecked'} validate\n * @param {(data: Input, invalid: import('@sveltejs/kit').Invalid<Input>) => MaybePromise<Output>} fn\n * @returns {RemoteForm<Input, Output>}\n * @since 2.27\n */\n/**\n * Creates a form object that can be spread onto a `<form>` element.\n *\n * See [Remote functions](https://svelte.dev/docs/kit/remote-functions#form) for full documentation.\n *\n * @template {StandardSchemaV1<RemoteFormInput, Record<string, any>>} Schema\n * @template Output\n * @overload\n * @param {Schema} validate\n * @param {(data: StandardSchemaV1.InferOutput<Schema>, invalid: import('@sveltejs/kit').Invalid<StandardSchemaV1.InferInput<Schema>>) => MaybePromise<Output>} fn\n * @returns {RemoteForm<StandardSchemaV1.InferInput<Schema>, Output>}\n * @since 2.27\n */\n/**\n * @template {RemoteFormInput} Input\n * @template Output\n * @param {any} validate_or_fn\n * @param {(data_or_invalid: any, invalid?: any) => MaybePromise<Output>} [maybe_fn]\n * @returns {RemoteForm<Input, Output>}\n * @since 2.27\n */\n/*@__NO_SIDE_EFFECTS__*/\n// @ts-ignore we don't want to prefix `fn` with an underscore, as that will be user-visible\nexport function form(validate_or_fn, maybe_fn) {\n\t/** @type {any} */\n\tconst fn = maybe_fn ?? validate_or_fn;\n\n\t/** @type {StandardSchemaV1 | null} */\n\tconst schema =\n\t\t!maybe_fn || validate_or_fn === 'unchecked' ? null : /** @type {any} */ (validate_or_fn);\n\n\t/**\n\t * @param {string | number | boolean} [key]\n\t */\n\tfunction create_instance(key) {\n\t\t/** @type {RemoteForm<Input, Output>} */\n\t\tconst instance = {};\n\n\t\tinstance.method = 'POST';\n\n\t\tObject.defineProperty(instance, 'enhance', {\n\t\t\tvalue: () => {\n\t\t\t\treturn { action: instance.action, method: instance.method };\n\t\t\t}\n\t\t});\n\n\t\tconst button_props = {\n\t\t\ttype: 'submit',\n\t\t\tonclick: () => {}\n\t\t};\n\n\t\tObject.defineProperty(button_props, 'enhance', {\n\t\t\tvalue: () => {\n\t\t\t\treturn { type: 'submit', formaction: instance.buttonProps.formaction, onclick: () => {} };\n\t\t\t}\n\t\t});\n\n\t\tObject.defineProperty(instance, 'buttonProps', {\n\t\t\tvalue: button_props\n\t\t});\n\n\t\t/** @type {RemoteInfo} */\n\t\tconst __ = {\n\t\t\ttype: 'form',\n\t\t\tname: '',\n\t\t\tid: '',\n\t\t\t/** @param {FormData} form_data */\n\t\t\tfn: async (form_data) => {\n\t\t\t\tconst validate_only = form_data.get('sveltekit:validate_only') === 'true';\n\n\t\t\t\tlet data = maybe_fn ? convert_formdata(form_data) : undefined;\n\n\t\t\t\tif (data && data.id === undefined) {\n\t\t\t\t\tconst id = form_data.get('sveltekit:id');\n\t\t\t\t\tif (typeof id === 'string') {\n\t\t\t\t\t\tdata.id = JSON.parse(id);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// TODO 3.0 remove this warning\n\t\t\t\tif (DEV && !data) {\n\t\t\t\t\tconst error = () => {\n\t\t\t\t\t\tthrow new Error(\n\t\t\t\t\t\t\t'Remote form functions no longer get passed a FormData object. ' +\n\t\t\t\t\t\t\t\t\"`form` now has the same signature as `query` or `command`, i.e. it expects to be invoked like `form(schema, callback)` or `form('unchecked', callback)`. \" +\n\t\t\t\t\t\t\t\t'The payload of the callback function is now a POJO instead of a FormData object. See https://kit.svelte.dev/docs/remote-functions#form for details.'\n\t\t\t\t\t\t);\n\t\t\t\t\t};\n\t\t\t\t\tdata = {};\n\t\t\t\t\tfor (const key of [\n\t\t\t\t\t\t'append',\n\t\t\t\t\t\t'delete',\n\t\t\t\t\t\t'entries',\n\t\t\t\t\t\t'forEach',\n\t\t\t\t\t\t'get',\n\t\t\t\t\t\t'getAll',\n\t\t\t\t\t\t'has',\n\t\t\t\t\t\t'keys',\n\t\t\t\t\t\t'set',\n\t\t\t\t\t\t'values'\n\t\t\t\t\t]) {\n\t\t\t\t\t\tObject.defineProperty(data, key, { get: error });\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t/** @type {{ submission: true, input?: Record<string, any>, issues?: InternalRemoteFormIssue[], result: Output }} */\n\t\t\t\tconst output = {};\n\n\t\t\t\t// make it possible to differentiate between user submission and programmatic `field.set(...)` updates\n\t\t\t\toutput.submission = true;\n\n\t\t\t\tconst { event, state } = get_request_store();\n\t\t\t\tconst validated = await schema?.['~standard'].validate(data);\n\n\t\t\t\tif (validate_only) {\n\t\t\t\t\treturn validated?.issues?.map((issue) => normalize_issue(issue, true)) ?? [];\n\t\t\t\t}\n\n\t\t\t\tif (validated?.issues !== undefined) {\n\t\t\t\t\thandle_issues(output, validated.issues, event.isRemoteRequest, form_data);\n\t\t\t\t} else {\n\t\t\t\t\tif (validated !== undefined) {\n\t\t\t\t\t\tdata = validated.value;\n\t\t\t\t\t}\n\n\t\t\t\t\tstate.refreshes ??= {};\n\n\t\t\t\t\tconst invalid = create_invalid();\n\n\t\t\t\t\ttry {\n\t\t\t\t\t\toutput.result = await run_remote_function(\n\t\t\t\t\t\t\tevent,\n\t\t\t\t\t\t\tstate,\n\t\t\t\t\t\t\ttrue,\n\t\t\t\t\t\t\tdata,\n\t\t\t\t\t\t\t(d) => d,\n\t\t\t\t\t\t\t(data) => (!maybe_fn ? fn(invalid) : fn(data, invalid))\n\t\t\t\t\t\t);\n\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\tif (e instanceof ValidationError) {\n\t\t\t\t\t\t\thandle_issues(output, e.issues, event.isRemoteRequest, form_data);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthrow e;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// We don't need to care about args or deduplicating calls, because uneval results are only relevant in full page reloads\n\t\t\t\t// where only one form submission is active at the same time\n\t\t\t\tif (!event.isRemoteRequest) {\n\t\t\t\t\tget_cache(__, state)[''] ??= output;\n\t\t\t\t}\n\n\t\t\t\treturn output;\n\t\t\t}\n\t\t};\n\n\t\tObject.defineProperty(instance, '__', { value: __ });\n\n\t\tObject.defineProperty(instance, 'action', {\n\t\t\tget: () => `?/remote=${__.id}`,\n\t\t\tenumerable: true\n\t\t});\n\n\t\tObject.defineProperty(button_props, 'formaction', {\n\t\t\tget: () => `?/remote=${__.id}`,\n\t\t\tenumerable: true\n\t\t});\n\n\t\tObject.defineProperty(instance, 'fields', {\n\t\t\tget() {\n\t\t\t\tconst data = get_cache(__)?.[''];\n\t\t\t\tconst issues = flatten_issues(data?.issues ?? []);\n\n\t\t\t\treturn create_field_proxy(\n\t\t\t\t\t{},\n\t\t\t\t\t() => data?.input ?? {},\n\t\t\t\t\t(path, value) => {\n\t\t\t\t\t\tif (data?.submission) {\n\t\t\t\t\t\t\t// don't override a submission\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tconst input =\n\t\t\t\t\t\t\tpath.length === 0 ? value : deep_set(data?.input ?? {}, path.map(String), value);\n\n\t\t\t\t\t\t(get_cache(__)[''] ??= {}).input = input;\n\t\t\t\t\t},\n\t\t\t\t\t() => issues\n\t\t\t\t);\n\t\t\t}\n\t\t});\n\n\t\t// TODO 3.0 remove\n\t\tif (DEV) {\n\t\t\tthrow_on_old_property_access(instance);\n\t\t}\n\n\t\tObject.defineProperty(instance, 'result', {\n\t\t\tget() {\n\t\t\t\ttry {\n\t\t\t\t\treturn get_cache(__)?.['']?.result;\n\t\t\t\t} catch {\n\t\t\t\t\treturn undefined;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\t// On the server, pending is always 0\n\t\tObject.defineProperty(instance, 'pending', {\n\t\t\tget: () => 0\n\t\t});\n\n\t\t// On the server, buttonProps.pending is always 0\n\t\tObject.defineProperty(button_props, 'pending', {\n\t\t\tget: () => 0\n\t\t});\n\n\t\tObject.defineProperty(instance, 'preflight', {\n\t\t\t// preflight is a noop on the server\n\t\t\tvalue: () => instance\n\t\t});\n\n\t\tObject.defineProperty(instance, 'validate', {\n\t\t\tvalue: () => {\n\t\t\t\tthrow new Error('Cannot call validate() on the server');\n\t\t\t}\n\t\t});\n\n\t\tif (key == undefined) {\n\t\t\tObject.defineProperty(instance, 'for', {\n\t\t\t\t/** @type {RemoteForm<any, any>['for']} */\n\t\t\t\tvalue: (key) => {\n\t\t\t\t\tconst { state } = get_request_store();\n\t\t\t\t\tconst cache_key = __.id + '|' + JSON.stringify(key);\n\t\t\t\t\tlet instance = (state.form_instances ??= new Map()).get(cache_key);\n\n\t\t\t\t\tif (!instance) {\n\t\t\t\t\t\tinstance = create_instance(key);\n\t\t\t\t\t\tinstance.__.id = `${__.id}/${encodeURIComponent(JSON.stringify(key))}`;\n\t\t\t\t\t\tinstance.__.name = __.name;\n\n\t\t\t\t\t\tstate.form_instances.set(cache_key, instance);\n\t\t\t\t\t}\n\n\t\t\t\t\treturn instance;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\treturn instance;\n\t}\n\n\treturn create_instance();\n}\n\n/**\n * @param {{ issues?: InternalRemoteFormIssue[], input?: Record<string, any>, result: any }} output\n * @param {readonly StandardSchemaV1.Issue[]} issues\n * @param {boolean} is_remote_request\n * @param {FormData} form_data\n */\nfunction handle_issues(output, issues, is_remote_request, form_data) {\n\toutput.issues = issues.map((issue) => normalize_issue(issue, true));\n\n\t// if it was a progressively-enhanced submission, we don't need\n\t// to return the input — it's already there\n\tif (!is_remote_request) {\n\t\toutput.input = {};\n\n\t\tfor (let key of form_data.keys()) {\n\t\t\t// redact sensitive fields\n\t\t\tif (/^[.\\]]?_/.test(key)) continue;\n\n\t\t\tconst is_array = key.endsWith('[]');\n\t\t\tconst values = form_data.getAll(key).filter((value) => typeof value === 'string');\n\n\t\t\tif (is_array) key = key.slice(0, -2);\n\n\t\t\tset_nested_value(\n\t\t\t\t/** @type {Record<string, any>} */ (output.input),\n\t\t\t\tkey,\n\t\t\t\tis_array ? values : values[0]\n\t\t\t);\n\t\t}\n\t}\n}\n\n/**\n * Creates an invalid function that can be used to imperatively mark form fields as invalid\n * @returns {import('@sveltejs/kit').Invalid}\n */\nfunction create_invalid() {\n\t/**\n\t * @param {...(string | StandardSchemaV1.Issue)} issues\n\t * @returns {never}\n\t */\n\tfunction invalid(...issues) {\n\t\tthrow new ValidationError(\n\t\t\tissues.map((issue) => {\n\t\t\t\tif (typeof issue === 'string') {\n\t\t\t\t\treturn {\n\t\t\t\t\t\tpath: [],\n\t\t\t\t\t\tmessage: issue\n\t\t\t\t\t};\n\t\t\t\t}\n\n\t\t\t\treturn issue;\n\t\t\t})\n\t\t);\n\t}\n\n\treturn /** @type {import('@sveltejs/kit').Invalid} */ (\n\t\tnew Proxy(invalid, {\n\t\t\tget(target, prop) {\n\t\t\t\tif (typeof prop === 'symbol') return /** @type {any} */ (target)[prop];\n\n\t\t\t\t/**\n\t\t\t\t * @param {string} message\n\t\t\t\t * @param {(string | number)[]} path\n\t\t\t\t * @returns {StandardSchemaV1.Issue}\n\t\t\t\t */\n\t\t\t\tconst create_issue = (message, path = []) => ({\n\t\t\t\t\tmessage,\n\t\t\t\t\tpath\n\t\t\t\t});\n\n\t\t\t\treturn create_issue_proxy(prop, create_issue, []);\n\t\t\t}\n\t\t})\n\t);\n}\n\n/**\n * Error thrown when form validation fails imperatively\n */\nclass ValidationError extends Error {\n\t/**\n\t * @param {StandardSchemaV1.Issue[]} issues\n\t */\n\tconstructor(issues) {\n\t\tsuper('Validation failed');\n\t\tthis.name = 'ValidationError';\n\t\tthis.issues = issues;\n\t}\n}\n\n/**\n * Creates a proxy that builds up a path and returns a function to create an issue\n * @param {string | number} key\n * @param {(message: string, path: (string | number)[]) => StandardSchemaV1.Issue} create_issue\n * @param {(string | number)[]} path\n */\nfunction create_issue_proxy(key, create_issue, path) {\n\tconst new_path = [...path, key];\n\n\t/**\n\t * @param {string} message\n\t * @returns {StandardSchemaV1.Issue}\n\t */\n\tconst issue_func = (message) => create_issue(message, new_path);\n\n\treturn new Proxy(issue_func, {\n\t\tget(target, prop) {\n\t\t\tif (typeof prop === 'symbol') return /** @type {any} */ (target)[prop];\n\n\t\t\t// Handle array access like invalid.items[0]\n\t\t\tif (/^\\d+$/.test(prop)) {\n\t\t\t\treturn create_issue_proxy(parseInt(prop, 10), create_issue, new_path);\n\t\t\t}\n\n\t\t\t// Handle property access like invalid.field.nested\n\t\t\treturn create_issue_proxy(prop, create_issue, new_path);\n\t\t}\n\t});\n}\n","/** @import { RemoteResource, RemotePrerenderFunction } from '@sveltejs/kit' */\n/** @import { RemotePrerenderInputsGenerator, RemoteInfo, MaybePromise } from 'types' */\n/** @import { StandardSchemaV1 } from '@standard-schema/spec' */\nimport { error, json } from '@sveltejs/kit';\nimport { DEV } from 'esm-env';\nimport { get_request_store } from '@sveltejs/kit/internal/server';\nimport { stringify, stringify_remote_arg } from '../../../shared.js';\nimport { app_dir, base } from '$app/paths/internal/server';\nimport {\n\tcreate_validator,\n\tget_cache,\n\tget_response,\n\tparse_remote_response,\n\trun_remote_function\n} from './shared.js';\n\n/**\n * Creates a remote prerender function. When called from the browser, the function will be invoked on the server via a `fetch` call.\n *\n * See [Remote functions](https://svelte.dev/docs/kit/remote-functions#prerender) for full documentation.\n *\n * @template Output\n * @overload\n * @param {() => MaybePromise<Output>} fn\n * @param {{ inputs?: RemotePrerenderInputsGenerator<void>, dynamic?: boolean }} [options]\n * @returns {RemotePrerenderFunction<void, Output>}\n * @since 2.27\n */\n/**\n * Creates a remote prerender function. When called from the browser, the function will be invoked on the server via a `fetch` call.\n *\n * See [Remote functions](https://svelte.dev/docs/kit/remote-functions#prerender) for full documentation.\n *\n * @template Input\n * @template Output\n * @overload\n * @param {'unchecked'} validate\n * @param {(arg: Input) => MaybePromise<Output>} fn\n * @param {{ inputs?: RemotePrerenderInputsGenerator<Input>, dynamic?: boolean }} [options]\n * @returns {RemotePrerenderFunction<Input, Output>}\n * @since 2.27\n */\n/**\n * Creates a remote prerender function. When called from the browser, the function will be invoked on the server via a `fetch` call.\n *\n * See [Remote functions](https://svelte.dev/docs/kit/remote-functions#prerender) for full documentation.\n *\n * @template {StandardSchemaV1} Schema\n * @template Output\n * @overload\n * @param {Schema} schema\n * @param {(arg: StandardSchemaV1.InferOutput<Schema>) => MaybePromise<Output>} fn\n * @param {{ inputs?: RemotePrerenderInputsGenerator<StandardSchemaV1.InferInput<Schema>>, dynamic?: boolean }} [options]\n * @returns {RemotePrerenderFunction<StandardSchemaV1.InferInput<Schema>, Output>}\n * @since 2.27\n */\n/**\n * @template Input\n * @template Output\n * @param {any} validate_or_fn\n * @param {any} [fn_or_options]\n * @param {{ inputs?: RemotePrerenderInputsGenerator<Input>, dynamic?: boolean }} [maybe_options]\n * @returns {RemotePrerenderFunction<Input, Output>}\n * @since 2.27\n */\n/*@__NO_SIDE_EFFECTS__*/\nexport function prerender(validate_or_fn, fn_or_options, maybe_options) {\n\tconst maybe_fn = typeof fn_or_options === 'function' ? fn_or_options : undefined;\n\n\t/** @type {typeof maybe_options} */\n\tconst options = maybe_options ?? (maybe_fn ? undefined : fn_or_options);\n\n\t/** @type {(arg?: Input) => MaybePromise<Output>} */\n\tconst fn = maybe_fn ?? validate_or_fn;\n\n\t/** @type {(arg?: any) => MaybePromise<Input>} */\n\tconst validate = create_validator(validate_or_fn, maybe_fn);\n\n\t/** @type {RemoteInfo} */\n\tconst __ = {\n\t\ttype: 'prerender',\n\t\tid: '',\n\t\tname: '',\n\t\thas_arg: !!maybe_fn,\n\t\tinputs: options?.inputs,\n\t\tdynamic: options?.dynamic\n\t};\n\n\t/** @type {RemotePrerenderFunction<Input, Output> & { __: RemoteInfo }} */\n\tconst wrapper = (arg) => {\n\t\t/** @type {Promise<Output> & Partial<RemoteResource<Output>>} */\n\t\tconst promise = (async () => {\n\t\t\tconst { event, state } = get_request_store();\n\t\t\tconst payload = stringify_remote_arg(arg, state.transport);\n\t\t\tconst id = __.id;\n\t\t\tconst url = `${base}/${app_dir}/remote/${id}${payload ? `/${payload}` : ''}`;\n\n\t\t\tif (!state.prerendering && !DEV && !event.isRemoteRequest) {\n\t\t\t\ttry {\n\t\t\t\t\treturn await get_response(__, arg, state, async () => {\n\t\t\t\t\t\tconst key = stringify_remote_arg(arg, state.transport);\n\t\t\t\t\t\tconst cache = get_cache(__, state);\n\n\t\t\t\t\t\t// TODO adapters can provide prerendered data more efficiently than\n\t\t\t\t\t\t// fetching from the public internet\n\t\t\t\t\t\tconst promise = (cache[key] ??= fetch(new URL(url, event.url.origin).href).then(\n\t\t\t\t\t\t\tasync (response) => {\n\t\t\t\t\t\t\t\tif (!response.ok) {\n\t\t\t\t\t\t\t\t\tthrow new Error('Prerendered response not found');\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tconst prerendered = await response.json();\n\n\t\t\t\t\t\t\t\tif (prerendered.type === 'error') {\n\t\t\t\t\t\t\t\t\terror(prerendered.status, prerendered.error);\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\treturn prerendered.result;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t));\n\n\t\t\t\t\t\treturn parse_remote_response(await promise, state.transport);\n\t\t\t\t\t});\n\t\t\t\t} catch {\n\t\t\t\t\t// not available prerendered, fallback to normal function\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (state.prerendering?.remote_responses.has(url)) {\n\t\t\t\treturn /** @type {Promise<any>} */ (state.prerendering.remote_responses.get(url));\n\t\t\t}\n\n\t\t\tconst promise = get_response(__, arg, state, () =>\n\t\t\t\trun_remote_function(event, state, false, arg, validate, fn)\n\t\t\t);\n\n\t\t\tif (state.prerendering) {\n\t\t\t\tstate.prerendering.remote_responses.set(url, promise);\n\t\t\t}\n\n\t\t\tconst result = await promise;\n\n\t\t\tif (state.prerendering) {\n\t\t\t\tconst body = { type: 'result', result: stringify(result, state.transport) };\n\t\t\t\tstate.prerendering.dependencies.set(url, {\n\t\t\t\t\tbody: JSON.stringify(body),\n\t\t\t\t\tresponse: json(body)\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t// TODO this is missing error/loading/current/status\n\t\t\treturn result;\n\t\t})();\n\n\t\tpromise.catch(() => {});\n\n\t\treturn /** @type {RemoteResource<Output>} */ (promise);\n\t};\n\n\tObject.defineProperty(wrapper, '__', { value: __ });\n\n\treturn wrapper;\n}\n","/** @import { RemoteQuery, RemoteQueryFunction } from '@sveltejs/kit' */\n/** @import { RemoteInfo, MaybePromise } from 'types' */\n/** @import { StandardSchemaV1 } from '@standard-schema/spec' */\nimport { get_request_store } from '@sveltejs/kit/internal/server';\nimport { create_remote_cache_key, stringify_remote_arg } from '../../../shared.js';\nimport { prerendering } from '__sveltekit/environment';\nimport { create_validator, get_cache, get_response, run_remote_function } from './shared.js';\n\n/**\n * Creates a remote query. When called from the browser, the function will be invoked on the server via a `fetch` call.\n *\n * See [Remote functions](https://svelte.dev/docs/kit/remote-functions#query) for full documentation.\n *\n * @template Output\n * @overload\n * @param {() => MaybePromise<Output>} fn\n * @returns {RemoteQueryFunction<void, Output>}\n * @since 2.27\n */\n/**\n * Creates a remote query. When called from the browser, the function will be invoked on the server via a `fetch` call.\n *\n * See [Remote functions](https://svelte.dev/docs/kit/remote-functions#query) for full documentation.\n *\n * @template Input\n * @template Output\n * @overload\n * @param {'unchecked'} validate\n * @param {(arg: Input) => MaybePromise<Output>} fn\n * @returns {RemoteQueryFunction<Input, Output>}\n * @since 2.27\n */\n/**\n * Creates a remote query. When called from the browser, the function will be invoked on the server via a `fetch` call.\n *\n * See [Remote functions](https://svelte.dev/docs/kit/remote-functions#query) for full documentation.\n *\n * @template {StandardSchemaV1} Schema\n * @template Output\n * @overload\n * @param {Schema} schema\n * @param {(arg: StandardSchemaV1.InferOutput<Schema>) => MaybePromise<Output>} fn\n * @returns {RemoteQueryFunction<StandardSchemaV1.InferInput<Schema>, Output>}\n * @since 2.27\n */\n/**\n * @template Input\n * @template Output\n * @param {any} validate_or_fn\n * @param {(args?: Input) => MaybePromise<Output>} [maybe_fn]\n * @returns {RemoteQueryFunction<Input, Output>}\n * @since 2.27\n */\n/*@__NO_SIDE_EFFECTS__*/\nexport function query(validate_or_fn, maybe_fn) {\n\t/** @type {(arg?: Input) => Output} */\n\tconst fn = maybe_fn ?? validate_or_fn;\n\n\t/** @type {(arg?: any) => MaybePromise<Input>} */\n\tconst validate = create_validator(validate_or_fn, maybe_fn);\n\n\t/** @type {RemoteInfo} */\n\tconst __ = { type: 'query', id: '', name: '' };\n\n\t/** @type {RemoteQueryFunction<Input, Output> & { __: RemoteInfo }} */\n\tconst wrapper = (arg) => {\n\t\tif (prerendering) {\n\t\t\tthrow new Error(\n\t\t\t\t`Cannot call query '${__.name}' while prerendering, as prerendered pages need static data. Use 'prerender' from $app/server instead`\n\t\t\t);\n\t\t}\n\n\t\tconst { event, state } = get_request_store();\n\n\t\t/** @type {Promise<any> & Partial<RemoteQuery<any>>} */\n\t\tconst promise = get_response(__, arg, state, () =>\n\t\t\trun_remote_function(event, state, false, arg, validate, fn)\n\t\t);\n\n\t\tpromise.catch(() => {});\n\n\t\t/** @param {Output} value */\n\t\tpromise.set = (value) => {\n\t\t\tconst { state } = get_request_store();\n\t\t\tconst refreshes = state.refreshes;\n\n\t\t\tif (!refreshes) {\n\t\t\t\tthrow new Error(\n\t\t\t\t\t`Cannot call set on query '${__.name}' because it is not executed in the context of a command/form remote function`\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tif (__.id) {\n\t\t\t\tconst cache = get_cache(__, state);\n\t\t\t\tconst key = stringify_remote_arg(arg, state.transport);\n\t\t\t\trefreshes[create_remote_cache_key(__.id, key)] = cache[key] = Promise.resolve(value);\n\t\t\t}\n\t\t};\n\n\t\tpromise.refresh = () => {\n\t\t\tconst { state } = get_request_store();\n\t\t\tconst refreshes = state.refreshes;\n\n\t\t\tif (!refreshes) {\n\t\t\t\tthrow new Error(\n\t\t\t\t\t`Cannot call refresh on query '${__.name}' because it is not executed in the context of a command/form remote function`\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tconst cache_key = create_remote_cache_key(__.id, stringify_remote_arg(arg, state.transport));\n\t\t\trefreshes[cache_key] = promise;\n\n\t\t\t// TODO we could probably just return promise here, but would need to update the types\n\t\t\treturn promise.then(() => {});\n\t\t};\n\n\t\tpromise.withOverride = () => {\n\t\t\tthrow new Error(`Cannot call '${__.name}.withOverride()' on the server`);\n\t\t};\n\n\t\treturn /** @type {RemoteQuery<Output>} */ (promise);\n\t};\n\n\tObject.defineProperty(wrapper, '__', { value: __ });\n\n\treturn wrapper;\n}\n\n/**\n * Creates a batch query function that collects multiple calls and executes them in a single request\n *\n * See [Remote functions](https://svelte.dev/docs/kit/remote-functions#query.batch) for full documentation.\n *\n * @template Input\n * @template Output\n * @overload\n * @param {'unchecked'} validate\n * @param {(args: Input[]) => MaybePromise<(arg: Input, idx: number) => Output>} fn\n * @returns {RemoteQueryFunction<Input, Output>}\n * @since 2.35\n */\n/**\n * Creates a batch query function that collects multiple calls and executes them in a single request\n *\n * See [Remote functions](https://svelte.dev/docs/kit/remote-functions#query.batch) for full documentation.\n *\n * @template {StandardSchemaV1} Schema\n * @template Output\n * @overload\n * @param {Schema} schema\n * @param {(args: StandardSchemaV1.InferOutput<Schema>[]) => MaybePromise<(arg: StandardSchemaV1.InferOutput<Schema>, idx: number) => Output>} fn\n * @returns {RemoteQueryFunction<StandardSchemaV1.InferInput<Schema>, Output>}\n * @since 2.35\n */\n/**\n * @template Input\n * @template Output\n * @param {any} validate_or_fn\n * @param {(args?: Input[]) => MaybePromise<(arg: Input, idx: number) => Output>} [maybe_fn]\n * @returns {RemoteQueryFunction<Input, Output>}\n * @since 2.35\n */\n/*@__NO_SIDE_EFFECTS__*/\nfunction batch(validate_or_fn, maybe_fn) {\n\t/** @type {(args?: Input[]) => (arg: Input, idx: number) => Output} */\n\tconst fn = maybe_fn ?? validate_or_fn;\n\n\t/** @type {(arg?: any) => MaybePromise<Input>} */\n\tconst validate = create_validator(validate_or_fn, maybe_fn);\n\n\t/** @type {RemoteInfo & { type: 'query_batch' }} */\n\tconst __ = {\n\t\ttype: 'query_batch',\n\t\tid: '',\n\t\tname: '',\n\t\trun: (args) => {\n\t\t\tconst { event, state } = get_request_store();\n\n\t\t\treturn run_remote_function(\n\t\t\t\tevent,\n\t\t\t\tstate,\n\t\t\t\tfalse,\n\t\t\t\targs,\n\t\t\t\t(array) => Promise.all(array.map(validate)),\n\t\t\t\tfn\n\t\t\t);\n\t\t}\n\t};\n\n\t/** @type {{ args: any[], resolvers: Array<{resolve: (value: any) => void, reject: (error: any) => void}> }} */\n\tlet batching = { args: [], resolvers: [] };\n\n\t/** @type {RemoteQueryFunction<Input, Output> & { __: RemoteInfo }} */\n\tconst wrapper = (arg) => {\n\t\tif (prerendering) {\n\t\t\tthrow new Error(\n\t\t\t\t`Cannot call query.batch '${__.name}' while prerendering, as prerendered pages need static data. Use 'prerender' from $app/server instead`\n\t\t\t);\n\t\t}\n\n\t\tconst { event, state } = get_request_store();\n\n\t\t/** @type {Promise<any> & Partial<RemoteQuery<any>>} */\n\t\tconst promise = get_response(__, arg, state, () => {\n\t\t\t// Collect all the calls to the same query in the same macrotask,\n\t\t\t// then execute them as one backend request.\n\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\t// We don't need to deduplicate args here, because get_response already caches/reuses identical calls\n\t\t\t\tbatching.args.push(arg);\n\t\t\t\tbatching.resolvers.push({ resolve, reject });\n\n\t\t\t\tif (batching.args.length > 1) return;\n\n\t\t\t\tsetTimeout(async () => {\n\t\t\t\t\tconst batched = batching;\n\t\t\t\t\tbatching = { args: [], resolvers: [] };\n\n\t\t\t\t\ttry {\n\t\t\t\t\t\tconst get_result = await run_remote_function(\n\t\t\t\t\t\t\tevent,\n\t\t\t\t\t\t\tstate,\n\t\t\t\t\t\t\tfalse,\n\t\t\t\t\t\t\tbatched.args,\n\t\t\t\t\t\t\t(array) => Promise.all(array.map(validate)),\n\t\t\t\t\t\t\tfn\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tfor (let i = 0; i < batched.resolvers.length; i++) {\n\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\tbatched.resolvers[i].resolve(get_result(batched.args[i], i));\n\t\t\t\t\t\t\t} catch (error) {\n\t\t\t\t\t\t\t\tbatched.resolvers[i].reject(error);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t} catch (error) {\n\t\t\t\t\t\tfor (const resolver of batched.resolvers) {\n\t\t\t\t\t\t\tresolver.reject(error);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}, 0);\n\t\t\t});\n\t\t});\n\n\t\tpromise.catch(() => {});\n\n\t\tpromise.refresh = async () => {\n\t\t\tconst { state } = get_request_store();\n\t\t\tconst refreshes = state.refreshes;\n\n\t\t\tif (!refreshes) {\n\t\t\t\tthrow new Error(\n\t\t\t\t\t`Cannot call refresh on query.batch '${__.name}' because it is not executed in the context of a command/form remote function`\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tconst cache_key = create_remote_cache_key(__.id, stringify_remote_arg(arg, state.transport));\n\t\t\trefreshes[cache_key] = await /** @type {Promise<any>} */ (promise);\n\t\t};\n\n\t\tpromise.withOverride = () => {\n\t\t\tthrow new Error(`Cannot call '${__.name}.withOverride()' on the server`);\n\t\t};\n\n\t\treturn /** @type {RemoteQuery<Output>} */ (promise);\n\t};\n\n\tObject.defineProperty(wrapper, '__', { value: __ });\n\n\treturn wrapper;\n}\n\n// Add batch as a property to the query function\nObject.defineProperty(query, 'batch', { value: batch, enumerable: true });\n"],"names":["target","data","key","instance","DEV","promise","state","error"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,5]}