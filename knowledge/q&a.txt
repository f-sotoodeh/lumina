questions:

1. Google Fonts List
آیا لیست فونت‌ها hardcoded در backend است؟
یا از Google Fonts API گرفته می‌شود؟
چند فونت پیش‌فرض داریم؟
2. Avatar Fallback
وقتی avatar وجود ندارد، چه چیزی نمایش داده می‌شود؟
Initials از name؟ Icon پیش‌فرض؟ رنگ تصادفی؟
3. Deck Thumbnail Fallback
وقتی thumbnail وجود ندارد (قبل از اولین save)، چه می‌شود؟
placeholder image؟ رنگ پیش‌فرض؟
4. File Organization در Minio
آیا deck_id در path به صورت ObjectId string است یا hex string؟
مثال: 507f1f77bcf86cd799439011/filename.jpg یا 507f1f77bcf86cd799439011.jpg؟
5. Step inner_html Security
آیا HTML validation/sanitization وجود دارد؟
آیا XSS protection وجود دارد؟
آیا فقط HTML خاصی مجاز است یا همه HTML؟
6. Admin Email Change
آیا admin می‌تواند email کاربر را تغییر دهد؟
endpoint چیست؟ آیا همان /api/v1/users/me است یا endpoint جداگانه؟
7. Notifications
آیا هنگام share deck، کاربر اطلاع می‌گیرد؟
آیا هنگام comment روی step، owner/editor اطلاع می‌گیرد؟
آیا notification system وجود دارد؟
8. Background Color Validation
آیا format hex validation وجود دارد؟ (مثلاً فقط #RRGGBB یا #RRGGBBAA هم مجاز است؟)
آیا رنگ‌های نامعتبر reject می‌شوند؟
9. Deck Settings Validation
آیا محدودیت‌هایی برای data_width, data_height, data_perspective وجود دارد؟
آیا مقادیر منفی یا خیلی بزرگ مجاز هستند؟
10. Step Position Validation
آیا محدودیت‌هایی برای position values وجود دارد؟
آیا مقادیر خیلی بزرگ یا NaN مجاز هستند؟
11. File Upload Response
آیا response شامل file_id است؟
آیا response شامل presigned URL است؟
آیا response شامل thumbnail URL است؟
12. Deck Export Format
آیا export فقط HTML است یا فرمت‌های دیگر هم (PDF، ZIP)؟
آیا export شامل metadata (title، author، date) است؟
13. Public Preview Access
آیا public preview فقط با UUID قابل دسترسی است؟
آیا امکان share کردن public preview با link وجود دارد؟
14. Comment Threading
آیا امکان reply به comment وجود دارد؟
یا فقط flat comments (بدون threading)؟
15. Deck Duplication/Clone
آیا امکان duplicate کردن deck وجود دارد؟
آیا endpoint برای clone deck وجود دارد؟
16. Step Duplication
آیا امکان duplicate کردن step وجود دارد؟
آیا drag & drop برای copy (نه فقط move) وجود دارد؟
17. Search Results Ordering
آیا search results مرتب می‌شوند؟ (مثلاً بر اساس relevance، date، title)
آیا sorting options وجود دارد؟
18. File Storage Quota
آیا محدودیت storage per user وجود دارد؟
آیا endpoint برای check quota وجود دارد؟



answers:

از Google Fonts API گرفته می‌شود (در startup اپ fetch و cache می‌شود)
پیش‌فرض: 20 فونت محبوب (مثل Roboto, Open Sans, Lato, Montserrat, …) در UI نمایش داده می‌شود، بقیه با جستجو.

Avatar Fallback
Initials از name (مثلاً "علی رضایی" → AR)
پس‌زمینه: رنگ تصادفی از پالت ۸ رنگ ثابت (daisyUI)
اگر name هم نبود → آیکن کاربر پیش‌فرض

Deck Thumbnail Fallback
placeholder SVG ساده (گرادیانت + عنوان deck در وسط)
رنگ پس‌زمینه از background_color deck یا #6366f1

File Organization در Minio
مسیر: decks/{deck_id}/{uuid}.{ext}
deck_id به صورت hex string (24 کاراکتر)
مثال: 507f1f77bcf86cd799439011/a1b2c3d4-...jpg

Step inner_html Security
Sanitization با DOMPurify (در frontend و backend)
فقط تگ‌های مجاز: <p><br><strong><em><u><s><span><div><img><a><ul><ol><li><h1-6><blockquote><code><pre>
تمام attributeهای on* و javascript: حذف می‌شوند
XSS 100% محافظت شده

Admin Email Change
بله، admin می‌تواند
endpoint جدا: PUT /api/v1/admin/users/{user_id}/email
فقط admin دسترسی دارد

Notifications
فعلاً نه (v1 بدون notification)
فقط badge تعداد کامنت‌های جدید در TopBar
در v2 با SSE یا WebSocket اضافه می‌شود

Background Color Validation
فقط #RRGGBB مجاز
regex: ^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{6})$
نامعتبر → 400 error

Deck Settings Validation
data_width/height: 500–4000
844   - data_perspective: 100–5000
منفی یا خارج از محدوده → 400

Step Position Validation
محدوده: -50000 تا +50000
NaN یا خارج از محدوده → به نزدیک‌ترین مقدار معتبر clamp می‌شود (نه error)

File Upload Responsejson{
  "file_id": "abc123",
  "url": "presigned-url-full",
  "thumbnail_url": "presigned-url-thumb",
  "original_name": "photo.jpg"
}
همه شامل می‌شوند

Deck Export Format
فقط HTML تک‌فایل (impress.js + CSS + JS inline)
PDF در v2 اضافه می‌شود
metadata در <meta> تگ‌ها: title, author, date

Public Preview Access
فقط با UUID
لینک: https://lumina.app/preview/550e8400-e29b-41d4-a716-446655440000
کاملاً قابل اشتراک‌گذاری

Comment Threading
flat (بدون reply)
در v2 اضافه می‌شود

Deck Duplication/Clone
بله
endpoint: POST /api/v1/decks/{id}/clone
کپی کامل + فایل‌ها + thumbnail جدید

Step Duplication
بله
در BottomTimeline: Alt + drag → copy
یا راست‌کلیک → Duplicate

Search Results Ordering
پیش‌فرض: relevance (MongoDB text score)
query param: ?sort=title_asc | title_desc | created_desc | updated_desc

File Storage Quota
بله، 100MB per user (free tier)
endpoint: GET /api/v1/files/quota → {used: 52.3, limit: 100, unit: "MB"}
آپلود بیشتر → 413 Payload Too Large